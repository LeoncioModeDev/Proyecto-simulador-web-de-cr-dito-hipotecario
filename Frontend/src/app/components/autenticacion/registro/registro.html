<div class="contenedor-registro">
  <!-- Lado izquierdo -->
  <div class="lado-izquierdo">
    <div class="contenido">
      <h1>Registrarse</h1>
      <form [formGroup]="formulario">
        <div>
          <label for="username">Nombre de usuario:</label>
          <input
            id="username"
            class="campos"
            formControlName="username"
            type="text"
            placeholder="Ej: juan_perez"
            />
            @if (formulario.get('username')?.invalid && formulario.get('username')?.touched) {
              <span class="error">
                @if (formulario.get('username')?.hasError('required')) {
                  <span>Usuario es requerido</span>
                }
                @if (formulario.get('username')?.hasError('minlength')) {
                  <span>Mínimo 3 caracteres</span>
                }
              </span>
            }
          </div>

          <div>
            <label for="email">Correo electrónico:</label>
            <input
              id="email"
              class="campos"
              formControlName="email"
              type="email"
              placeholder="Ej: juan@example.com"
              />
              @if (formulario.get('email')?.invalid && formulario.get('email')?.touched) {
                <span class="error">
                  @if (formulario.get('email')?.hasError('required')) {
                    <span>Email es requerido</span>
                  }
                  @if (formulario.get('email')?.hasError('email')) {
                    <span>Email inválido</span>
                  }
                </span>
              }
            </div>

            <div class="campos-divididos">
              <div>
                <label for="password">Contraseña:</label>
                <input
                  id="password"
                  class="campos"
                  formControlName="password"
                  type="password"
                  placeholder="Mínimo 6 caracteres"
                  />
                  @if (formulario.get('password')?.invalid && formulario.get('password')?.touched) {
                    <span class="error">
                      @if (formulario.get('password')?.hasError('required')) {
                        <span>Contraseña es requerida</span>
                      }
                      @if (formulario.get('password')?.hasError('minlength')) {
                        <span>Mínimo 6 caracteres</span>
                      }
                    </span>
                  }
                </div>

                <div>
                  <label for="confirmPassword">Repetir contraseña:</label>
                  <input
                    id="confirmPassword"
                    class="campos"
                    formControlName="confirmPassword"
                    type="password"
                    placeholder="Repite tu contraseña"
                    />
                    @if (formulario.get('confirmPassword')?.invalid && formulario.get('confirmPassword')?.touched) {
                      <span class="error">
                        @if (formulario.get('confirmPassword')?.hasError('required')) {
                          <span>Debe repetir la contraseña</span>
                        }
                        @if (formulario.hasError('passwordMismatch') && formulario.get('confirmPassword')?.touched) {
                          <span>
                            Las contraseñas no coinciden
                          </span>
                        }
                      </span>
                    }
                  </div>
                </div>

                @if (mensajeError) {
                  <div class="error-general">
                    {{ mensajeError }}
                  </div>
                }

                <app-boton-principal
                  (click)="registrar()"
                  texto="Registrarse"
                  [disabled]="formulario.invalid || cargando">
                </app-boton-principal>

                <p class="texto-secundario">
                  ¿Ya tienes una cuenta?
                  <a routerLink="/login" class="enlace">Iniciar sesión</a>
                </p>
              </form>
            </div>
          </div>

          <!-- Lado derecho -->
          <div class="lado-derecho">
            <!--<img src="imagen_mivivienda_login.png" alt="Inicio de sesión MiVivienda">-->
          </div>
        </div>